<!DOCTYPE html>
<html>

<head>
	<title>Catalogue seu livro favorito aqui!</title>
    
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="assets/css/main.css" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	
	<script>

		$(function () {
			var acervoArray = new Array();
			$("#botao").click(function () {
				let tituloLivro = $("#titulo").val();
				let descricaoLivro = $("#descricao").val();
				let generoLivro = $("#genero").val();
				let autorLivro = $("#autor").val();
				$("#acervo").append($("<tr>").addClass("livro")
					.append($("<td>").text(tituloLivro)).addClass("titulo")
					.append($("<td>").text(descricaoLivro)).addClass("descricao")
					.append($("<td>").text(generoLivro)).addClass("genero")
					.append($("<td>").text(autorLivro)).addClass("autor")
					.append($("<td>").append($("<img>").attr('src', 'images/lixeira.png'))));
				$("#titulo").val("");
				$("#descricao").val("");
				$("#genero").val("");
				$("#autor").val("");
			})

			$("#botao_apagar").click(function () {
				$("#acervo").empty();
			})

			$("input[name=salvar_bd]").click(function () {
				$('.livro').each(function (idx, obj) {
					let titulo = $(obj).children("td:nth-child(1)").text();
					let descricao = $(obj).children("td:nth-child(2)").text();
					let genero = $(obj).children("td:nth-child(3)").text();
					let autor = $(obj).children("td:nth-child(4)").text();
					var livro = {
						"titulo": titulo, "descricao": descricao,
						"genero": genero, "autor": autor
					};
					acervoArray.push(livro);
					$("input[name=acervo_post]").val(JSON.stringify(acervoArray));
					console.log(acervoArray);
				});

			});


			$("#acervo").on("click", "img", function () {
				$(this).parents("#acervo tr").remove();
			})

		})

	</script>
</head>

<body>

	<fieldset>
		<h2>Cadastro de livros</h2>
		<input type="text" id="titulo" placeholder="titulo"><br>
		<textarea id="descricao"  placeholder="descrição" ></textarea> <br>
		<select id="genero" placeholder="genêro">
			<option value="Romance">Romance</option>
			<option value="Drama">Drama</option>
			<option value="Terror">Terror</option>
			<option value="Ficção">Ficção</option>
			<option value="Técnico">Técnico</option>
           
		</select>
		<br>
		<input type="text" id="autor" placeholder="autor">
		<br>
		<button id="botao">Cadastrar</button>
	</fieldset>

	<br>

	<table id="acervo">
		<tr>
			<th class="teste">Título</th>
			<th class="teste">Descrição</th>
			<th class="teste">Gênero</th>
			<th class="teste">Autor</th>
			<th></th>
		</tr>
	</table>
	<button id="botao_apagar">Limpar a lista</button>
	<br>
	<br>
	<form action="https://rafaelescalfoni.net/web/livros.php" method="post">
		<input type="hidden" name="acervo_post">
		<input type="submit" value="Salvar no BD" name="salvar_bd">
	</form>





    <body>

	
                       
            </div>
        </section>

        <a href="trimestresjava.html" class="button alt">Voltar</a></a>

        	<!-- Footer -->
			<footer id="footer">
				<div class="container">
					<ul class="icons">
						<li><a href="#" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
						<li><a href="#" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
						<li><a href="#" class="icon fa-instagram"><span class="label">Instagram</span></a></li>
						<li><a href="#" class="icon fa-envelope-o"><span class="label">Email</span></a></li>
					</ul>
				</div>
				<div class="copyright">
					&copy; Untitled. All rights reserved.
				</div>
			</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
    
    </body>
</html>
